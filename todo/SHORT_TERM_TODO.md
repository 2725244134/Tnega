# Tnega çŸ­æœŸå¾…åŠäº‹é¡¹

> ç”Ÿæˆæ—¶é—´ï¼š2025-11-01  
> çŠ¶æ€ï¼šè¿›è¡Œä¸­  
> ä¼˜å…ˆçº§ï¼šP0 (ç´§æ€¥) > P1 (é‡è¦) > P2 (ä¼˜åŒ–)

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

ç†è§£å¹¶å®Œå–„ `x_crawl` â†’ `agent` çš„æ•°æ®æµï¼Œç¡®ä¿æ™ºèƒ½å¤„ç†å±‚èƒ½å¤Ÿæ¥æ”¶æ­£ç¡®çš„æ•°æ®ç»“æ„ã€‚

---

## ğŸ“‹ å¾…åŠæ¸…å•

### P0 - å…³é”®é—®é¢˜ï¼ˆé˜»å¡é¡¹ï¼‰

#### âœ… DONE-001: ç†è§£ x_crawl è¾“å‡ºç»“æ„
- [x] ç¡®è®¤è¿”å›ç±»å‹ï¼š`TweetDiscussionCollection`
- [x] ç†è§£æ ¸å¿ƒå­—æ®µï¼š
  - `items: list[TweetWithContext]` - æ¨æ–‡åŠå…¶å®Œæ•´è®¨è®ºä¸Šä¸‹æ–‡
  - `metadata: CollectionMetadata` - é‡‡é›†å…ƒä¿¡æ¯
  - ä¾¿æ·å±æ€§ï¼š`all_tweets`, `all_users`, `success_rate` ç­‰
- [x] éªŒè¯åŠŸèƒ½æ­£å¸¸ï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡

**è¾“å‡ºæ‘˜è¦**ï¼š
```python
TweetDiscussionCollection:
â”œâ”€â”€ items: list[TweetWithContext]
â”‚   â”œâ”€â”€ tweet: Tweet              # ç§å­æ¨æ–‡
â”‚   â”œâ”€â”€ author: User              # ä½œè€…ä¿¡æ¯
â”‚   â”œâ”€â”€ replies: list[Tweet]      # å›å¤åˆ—è¡¨
â”‚   â””â”€â”€ thread_context: list[Tweet]  # Thread ä¸Šä¸‹æ–‡
â”‚
â”œâ”€â”€ metadata: CollectionMetadata
â”‚   â”œâ”€â”€ query: str                # æœç´¢æŸ¥è¯¢
â”‚   â”œâ”€â”€ query_type: "Latest"|"Top"
â”‚   â”œâ”€â”€ collected_at: datetime
â”‚   â”œâ”€â”€ seed_tweet_count: int
â”‚   â”œâ”€â”€ failed_tweet_ids: list[str]
â”‚   â””â”€â”€ ...ç»Ÿè®¡ä¿¡æ¯
â”‚
â””â”€â”€ ä¾¿æ·å±æ€§ï¼š
    â”œâ”€â”€ all_tweets: list[Tweet]   # æ‰€æœ‰æ¨æ–‡ï¼ˆå»é‡ï¼‰
    â”œâ”€â”€ all_users: dict[str, User]
    â”œâ”€â”€ total_tweets: int
    â”œâ”€â”€ total_replies: int
    â”œâ”€â”€ success_rate: float
    â””â”€â”€ average_replies_per_tweet: float
```

---

#### â³ TODO-002: è®¾è®¡ agent è¾“å…¥æ¥å£
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
å®šä¹‰ `src/agent/` å¦‚ä½•æ¥æ”¶å’Œå¤„ç† `TweetDiscussionCollection`

**å­ä»»åŠ¡**ï¼š
1. [ ] è®¾è®¡ Agent çš„è¾“å…¥ç­¾å
   ```python
   async def analyze_discussion(
       collection: TweetDiscussionCollection,
       analysis_type: Literal["sentiment", "topics", "timeline"],
       ...
   ) -> AnalysisResult
   ```

2. [ ] ç¡®å®š Agent éœ€è¦æå–çš„å­—æ®µ
   - æ˜¯å¦éœ€è¦æ‰€æœ‰æ¨æ–‡ï¼Ÿè¿˜æ˜¯åªéœ€è¦ç§å­æ¨æ–‡ï¼Ÿ
   - æ˜¯å¦éœ€è¦å®Œæ•´çš„ Thread ä¸Šä¸‹æ–‡ï¼Ÿ
   - ç”¨æˆ·ä¿¡æ¯å¦‚ä½•ä½¿ç”¨ï¼Ÿï¼ˆåœ°ç†ä½ç½®ã€å½±å“åŠ›åˆ†æï¼‰

3. [ ] è®¾è®¡è¾“å‡ºæ•°æ®ç»“æ„
   ```python
   class AnalysisResult(BaseModel):
       # å¾…è®¾è®¡
       pass
   ```

**ä¾èµ–**ï¼šæ—   
**é˜»å¡**ï¼šTODO-003, TODO-004

---

#### â³ TODO-003: å®ç°ç¬¬ä¸€ä¸ª Agent - æƒ…æ„Ÿåˆ†æ
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š4å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
ä½¿ç”¨ `pydantic-ai` å®ç°é˜¿æ‹‰ä¼¯è¯­æ¨æ–‡çš„æƒ…æ„Ÿåˆ†æ

**å­ä»»åŠ¡**ï¼š
1. [ ] åˆ›å»º `src/agent/sentiment_analyzer.py`
2. [ ] å®šä¹‰æƒ…æ„Ÿåˆ†ç±»å™¨ Agent
   - ä½¿ç”¨ `pydantic-ai` çš„ç±»å‹å®‰å…¨æ¥å£
   - è¾“å…¥ï¼š`TweetDiscussionCollection`
   - è¾“å‡ºï¼šæ¯æ¡æ¨æ–‡çš„æƒ…æ„Ÿæ ‡ç­¾ï¼ˆæ­£é¢/ä¸­ç«‹/è´Ÿé¢ï¼‰
3. [ ] å¤„ç†é˜¿æ‹‰ä¼¯è¯­æ–‡æœ¬
   - ç¡®è®¤ LLM æ˜¯å¦æ”¯æŒé˜¿æ‹‰ä¼¯è¯­
   - å¯èƒ½éœ€è¦ç¿»è¯‘å±‚
4. [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**ä¾èµ–**ï¼šTODO-002  
**å‚è€ƒèµ„æ–™**ï¼š
- [pydantic-ai å®˜æ–¹æ–‡æ¡£](https://ai.pydantic.dev/)
- é¡¹ç›® AGENTS.md ä¸­çš„ç¤ºä¾‹

---

### P1 - é‡è¦ä¼˜åŒ–ï¼ˆæå‡è´¨é‡ï¼‰

#### â³ TODO-004: ä¼˜åŒ–æ•°æ®å­˜å‚¨æ ¼å¼
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
ç¡®å®šé‡‡é›†ç»“æœçš„æŒä¹…åŒ–æ–¹æ¡ˆ

**å­ä»»åŠ¡**ï¼š
1. [ ] è¯„ä¼°ç°æœ‰çš„ JSON/JSONL è¾“å‡º
   - æŸ¥çœ‹ `scripts/request_*.py` çš„è¾“å‡ºæ ¼å¼
   - ç¡®è®¤æ˜¯å¦æ»¡è¶³éœ€æ±‚
2. [ ] è®¾è®¡å­˜å‚¨ç»“æ„
   ```
   data/
   â”œâ”€â”€ raw/                    # åŸå§‹é‡‡é›†æ•°æ®
   â”‚   â””â”€â”€ 93é˜…å…µ_2025-11-01_001.jsonl
   â”œâ”€â”€ processed/              # Agent å¤„ç†åçš„ç»“æœ
   â”‚   â””â”€â”€ 93é˜…å…µ_sentiment_2025-11-01.json
   â””â”€â”€ analysis/               # åˆ†ææŠ¥å‘Š
       â””â”€â”€ 93é˜…å…µ_report_2025-11-01.md
   ```
3. [ ] å®ç°ä¿å­˜/åŠ è½½è¾…åŠ©å‡½æ•°
   ```python
   def save_collection(collection: TweetDiscussionCollection, output_dir: Path):
       ...
   
   def load_collection(file_path: Path) -> TweetDiscussionCollection:
       ...
   ```

**ä¾èµ–**ï¼šTODO-002

---

#### â³ TODO-005: è¡¥å……æ–‡æ¡£å’Œç¤ºä¾‹
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
å®Œå–„ API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

**å­ä»»åŠ¡**ï¼š
1. [ ] æ›´æ–° `docs/x_crawl_api.md`
   - è¡¥å…… `TweetDiscussionCollection` çš„å­—æ®µè¯´æ˜
   - æ·»åŠ å®é™…è¾“å‡ºç¤ºä¾‹ï¼ˆä»æµ‹è¯•æ—¥å¿—ä¸­æå–ï¼‰
2. [ ] åˆ›å»º `docs/agent_design.md`
   - è®°å½• Agent å±‚çš„è®¾è®¡å†³ç­–
   - è¯´æ˜æ•°æ®æµå‘
3. [ ] æ›´æ–° `README.md`
   - è¡¥å……å®Œæ•´çš„ä½¿ç”¨æµç¨‹
   - æ·»åŠ "å¿«é€Ÿå¼€å§‹"ç« èŠ‚

**ä¾èµ–**ï¼šTODO-002, TODO-003

---

### P2 - ä»£ç è´¨é‡ä¼˜åŒ–ï¼ˆéé˜»å¡ï¼‰

#### â³ TODO-006: æ¸…ç† twitter_client.py ä¸­çš„æ­»ä»£ç 
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š30åˆ†é’Ÿ

**ä»»åŠ¡æè¿°**ï¼š
ç§»é™¤ `fetch_paginated` å‡½æ•°ä¸­çš„å†—ä½™æ£€æŸ¥

**å…·ä½“ä½ç½®**ï¼š
- `src/x_crawl/twitter_client.py:152-154`
- ç¬¬äºŒæ¬¡ `max_results` æ£€æŸ¥æ˜¯æ­»ä»£ç ï¼ˆæ°¸è¿œä¸ä¼šè§¦å‘ï¼‰

**ä»£ç å˜æ›´**ï¼š
```python
# åˆ é™¤è¿™æ®µï¼ˆline 152-154ï¼‰
# if max_results and total_collected >= max_results:
#     logger.debug(f"å·²è¾¾åˆ°æ•°é‡é™åˆ¶ {max_results}ï¼Œåœæ­¢åˆ†é¡µ")
#     break
```

**ç†ç”±**ï¼š
- åœ¨ line 126-131 å·²ç»æœ‰ç­‰ä»·æ£€æŸ¥
- å¦‚æœ `remaining <= 0` å·²ç» breakï¼Œä¸ä¼šæ‰§è¡Œåˆ°è¿™é‡Œ
- ä¿æŒä»£ç ç®€æ´ï¼Œé¿å…æ··æ·†

**é£é™©**ï¼šä½ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰

---

#### â³ TODO-007: ç®€åŒ– twitter_client.py çš„é”™è¯¯å¤„ç†
**çŠ¶æ€**ï¼šå¾…è®¨è®º  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
è¯„ä¼°æ˜¯å¦ç®€åŒ– `fetch_paginated` ä¸­çš„å¤šå±‚ try-except

**å½“å‰çŠ¶æ€**ï¼š
- 3 å±‚åµŒå¥— try-except
- æ¯å±‚éƒ½åªæ˜¯è®°å½•æ—¥å¿—ç„¶å `raise`

**è®¨è®ºç‚¹**ï¼š
1. **æ˜¯å¦éœ€è¦ä¿ç•™è¯¦ç»†æ—¥å¿—ï¼Ÿ**
   - ä¼˜ç‚¹ï¼šæ’æŸ¥ API é—®é¢˜æ—¶æœ‰è¯¦ç»†ä¿¡æ¯
   - ç¼ºç‚¹ï¼šå¢åŠ ç¼©è¿›å±‚æ•°ï¼Œè¿å"å¥½å“å‘³"åŸåˆ™
2. **æ˜¯å¦æ”¹ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Ÿ**
   - å°†æ—¥å¿—é€»è¾‘æå–åˆ°è£…é¥°å™¨
   - ä¿æŒä¸»é€»è¾‘ç®€æ´
3. **è¿˜æ˜¯æš‚æ—¶ä¸åŠ¨ï¼Ÿ**
   - ç­‰å®é™…ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å†ä¼˜åŒ–
   - é¿å…è¿‡æ—©ä¼˜åŒ–

**å†³ç­–**ï¼šå¾…è®¨è®ºåç¡®å®š  
**ä¼˜å…ˆçº§**ï¼šå¯é™çº§ä¸º P3ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

---

#### â³ TODO-008: ä¿®å¤æ–‡ä»¶å‘½åæ‹¼å†™é”™è¯¯
**çŠ¶æ€**ï¼šå¾…å¼€å§‹  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š5åˆ†é’Ÿ

**ä»»åŠ¡æè¿°**ï¼š
é‡å‘½åæ‹¼å†™é”™è¯¯çš„æ–‡ä»¶

**å˜æ›´æ¸…å•**ï¼š
```bash
# scripts/ ç›®å½•ä¸‹
requst_tweet.py â†’ request_tweet.py
```

**å½±å“**ï¼š
- æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ–‡ä»¶å¼•ç”¨äº†è¿™ä¸ªæ–‡ä»¶
- æ›´æ–°ç›¸å…³çš„å¯¼å…¥è¯­å¥

**ä¼˜å…ˆçº§**ï¼šä½ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä½†æœ‰ç¢è§‚ç»ï¼‰

---

#### â³ TODO-009: éªŒè¯ CSV ç¼–ç åœ¨ä¸åŒç¯å¢ƒä¸‹çš„å…¼å®¹æ€§
**çŠ¶æ€**ï¼šå¾…éªŒè¯  
**è´Ÿè´£äºº**ï¼šå¾…ç¡®è®¤  
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

**ä»»åŠ¡æè¿°**ï¼š
ç¡®è®¤ CSV å¯¼å‡ºçš„ç¼–ç åœ¨ä¸åŒå¹³å°çš„ Excel ä¸­éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º

**æµ‹è¯•åœºæ™¯**ï¼š
1. Windows Excel 2016/2019/365
2. macOS Excel
3. LibreOffice Calc
4. Google Sheetsï¼ˆé€šè¿‡ä¸Šä¼ æµ‹è¯•ï¼‰

**å½“å‰å®ç°**ï¼š
- ä½¿ç”¨ `utf-8-sig` ç¼–ç ï¼ˆå¸¦ BOMï¼‰
- åŒ…å«é˜¿æ‹‰ä¼¯è¯­ï¼ˆRTL æ–‡æœ¬ï¼‰
- åŒ…å«ä¸­æ–‡åˆ—æ ‡é¢˜

**éœ€è¦éªŒè¯çš„é—®é¢˜**ï¼š
- [ ] é˜¿æ‹‰ä¼¯è¯­æ–‡æœ¬æ–¹å‘æ˜¯å¦æ­£ç¡®
- [ ] ä¸­æ–‡åˆ—æ ‡é¢˜æ˜¯å¦æ˜¾ç¤ºæ­£å¸¸
- [ ] é€—å·å’Œå¼•å·æ˜¯å¦æ­£ç¡®è½¬ä¹‰
- [ ] é•¿æ–‡æœ¬å•å…ƒæ ¼æ˜¯å¦éœ€è¦ç‰¹æ®Šå¤„ç†

**å¦‚æœå‡ºç°é—®é¢˜**ï¼š
- è€ƒè™‘æ·»åŠ  Excel æ ¼å¼å¯¼å‡ºï¼ˆ.xlsxï¼‰
- æä¾›å¤šç§ç¼–ç é€‰é¡¹ï¼ˆutf-8-sig / utf-8 / utf-16ï¼‰
- æ·»åŠ æ–‡æœ¬æ–¹å‘è®¾ç½®çš„æ–‡æ¡£è¯´æ˜

**ä¼˜å…ˆçº§**ï¼šP2ï¼ˆç­‰å®é™…ä½¿ç”¨ä¸­å‘ç°é—®é¢˜å†å¤„ç†ï¼‰

---

## ğŸ”„ è¿›è¡Œä¸­çš„ä»»åŠ¡

- **DONE-001**: âœ… å·²å®Œæˆï¼ˆç†è§£ x_crawl è¾“å‡ºï¼‰

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

- **æ€»ä»»åŠ¡æ•°**ï¼š8
- **å·²å®Œæˆ**ï¼š1 (12.5%)
- **è¿›è¡Œä¸­**ï¼š0
- **å¾…å¼€å§‹**ï¼š7 (87.5%)
- **é¢„è®¡æ€»è€—æ—¶**ï¼š~13.5 å°æ—¶

---

## ğŸ¯ æœ¬å‘¨ç›®æ ‡ï¼ˆå»ºè®®ï¼‰

**Week 1 (æœ¬å‘¨)**ï¼š
1. å®Œæˆ TODO-002ï¼ˆè®¾è®¡ Agent æ¥å£ï¼‰
2. å¼€å§‹ TODO-003ï¼ˆå®ç°æƒ…æ„Ÿåˆ†æ Agentï¼‰

**Week 2**ï¼š
1. å®Œæˆ TODO-003
2. å®Œæˆ TODO-004ï¼ˆæ•°æ®å­˜å‚¨ï¼‰
3. å®Œæˆ TODO-005ï¼ˆæ–‡æ¡£ï¼‰

**Week 3**ï¼š
1. P2 çº§åˆ«çš„ä»£ç è´¨é‡ä¼˜åŒ–
2. æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´æ¶æ„

---

## ğŸ“ å¤‡æ³¨

### å…³é”®å†³ç­–è®°å½•

**å†³ç­– #1**: æš‚ä¸é‡æ„ twitter_client.py  
**ç†ç”±**ï¼šå½“å‰ä»£ç åŠŸèƒ½æ­£å¸¸ï¼Œæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œæ€§èƒ½è‰¯å¥½  
**æ—¶é—´**ï¼š2025-11-01

**å†³ç­– #2**: ä¼˜å…ˆå®ç° Agent å±‚  
**ç†ç”±**ï¼šæ•°æ®é‡‡é›†å·²ç¨³å®šï¼Œä¸‹ä¸€æ­¥æ˜¯æ™ºèƒ½å¤„ç†  
**æ—¶é—´**ï¼š2025-11-01

### å¾…ç¡®è®¤çš„é—®é¢˜

1. **Agent ä½¿ç”¨çš„ LLM æ˜¯ä»€ä¹ˆï¼Ÿ**
   - OpenAI GPT-4?
   - Claude?
   - æœ¬åœ°æ¨¡å‹ï¼Ÿ
   
2. **é˜¿æ‹‰ä¼¯è¯­å¤„ç†ç­–ç•¥ï¼Ÿ**
   - ç›´æ¥åˆ†æé˜¿æ‹‰ä¼¯è¯­ï¼Ÿ
   - å…ˆç¿»è¯‘æˆè‹±æ–‡ï¼Ÿ
   
3. **æ•°æ®æŒä¹…åŒ–éœ€æ±‚ï¼Ÿ**
   - æ˜¯å¦éœ€è¦æ•°æ®åº“ï¼Ÿ
   - è¿˜æ˜¯æ–‡ä»¶ç³»ç»Ÿè¶³å¤Ÿï¼Ÿ

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ€»ä½“è®¾è®¡](../.github/copilot-instructions.md)
- [Agent è®¾è®¡è§„èŒƒ](../AGENTS.md)
- [x_crawl API æ–‡æ¡£](../docs/x_crawl_api.md)
- [å®ç°æ€»ç»“](../docs/IMPLEMENTATION_SUMMARY.md)

---

**æœ€åæ›´æ–°**ï¼š2025-11-01  
**æ›´æ–°è€…**ï¼šClaude (GitHub Copilot)
